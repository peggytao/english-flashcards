<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>è‹±æ–‡å–®å­—è¨˜æ†¶ç³»çµ±</title>
<style>
body { font-family: Arial; max-width: 700px; margin: 30px auto; }
input, button { padding: 8px; margin: 5px 0; }
.box { border: 1px solid #ccc; padding: 15px; margin-top: 15px; }
.big { font-size: 22px; font-weight: bold; margin: 10px 0; }
button { cursor: pointer; }
</style>
</head>
<body>

<h2>ğŸ“š è‹±æ–‡å–®å­—è¨˜æ†¶ç³»çµ±</h2>

<input id="english" placeholder="è¼¸å…¥è‹±æ–‡å–®å­—">
<button onclick="translateWord()">è‡ªå‹•ç¿»è­¯</button>
<button onclick="speakWord()">ğŸ”Š ç™¼éŸ³</button>
<button onclick="saveWord()">ğŸ’¾ æ–°å¢å„²å­˜</button>

<div class="box">
<div id="result" class="big"></div>
</div>

<hr>

<h3>ğŸ² æŠ½è€ƒæ¨¡å¼</h3>
<button onclick="randomWord()">éš¨æ©ŸæŠ½è€ƒ</button>
<button onclick="showAnswer()">é¡¯ç¤ºç­”æ¡ˆ</button>

<div class="box">
<div id="quizWord" class="big">å°šæœªæŠ½è€ƒ</div>
</div>

<hr>

<h3>ğŸ“– å·²å­˜å–®å­—</h3>
<ul id="wordList"></ul>

<script>

let words = JSON.parse(localStorage.getItem("words")) || [];
let currentTranslation = "";
let currentQuizIndex = null;

function saveStorage() {
  localStorage.setItem("words", JSON.stringify(words));
}

async function translateWord() {
  const eng = document.getElementById("english").value;
  if (!eng) return;

  const response = await fetch(
    `https://api.mymemory.translated.net/get?q=${encodeURIComponent(eng)}&langpair=en|zh-CN`
  );

  const data = await response.json();
  const translation = data.responseData.translatedText;

  currentTranslation = translation;
  document.getElementById("result").innerText = eng + " = " + currentTranslation;
}

function speakWord() {
  const eng = document.getElementById("english").value;
  if (!eng) return;
  const utterance = new SpeechSynthesisUtterance(eng);
  utterance.lang = "en-US";
  speechSynthesis.speak(utterance);
}

function saveWord() {
  const eng = document.getElementById("english").value;
  if (!eng || !currentTranslation) return;

  words.push({ eng: eng, chi: currentTranslation });
  saveStorage();
  renderList();
  document.getElementById("english").value = "";
  document.getElementById("result").innerText = "";
}

function renderList() {
  const list = document.getElementById("wordList");
  list.innerHTML = "";
  words.forEach((w, i) => {
    list.innerHTML += `<li>${w.eng} - ${w.chi}
    <button onclick="deleteWord(${i})">âŒ</button></li>`;
  });
}

function deleteWord(i) {
  words.splice(i, 1);
  saveStorage();
  renderList();
}

function randomWord() {
  if (words.length === 0) return;
  currentQuizIndex = Math.floor(Math.random() * words.length);
  document.getElementById("quizWord").innerText =
    words[currentQuizIndex].eng;
}

function showAnswer() {
  if (currentQuizIndex === null) return;
  document.getElementById("quizWord").innerText =
    words[currentQuizIndex].eng + " = " +
    words[currentQuizIndex].chi;
}

renderList();

</script>

</body>
</html>

